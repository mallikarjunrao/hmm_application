<script type="text/javascript" src="/javascripts/jquery.js"></script>
<script type="text/javascript" src="/javascripts/jquery-ui.js"></script>
<script type="text/javascript" src="/javascripts/jquery_ujs.js"></script>
<script type="text/javascript" src="/javascripts/application.js"></script>
<link rel="stylesheet" href="/stylesheets/jquery-ui-1.8.17.custom.css" type="text/css" />



<%#*<script type="text/javascript" src="/javascripts/jquery-ui-1.8.17.custom.js"></script>%>
<%#*<script type="text/javascript" src="/javascripts/jquery-ui-1.8.17.custom.min.js"></script>%>
<%#*<script type="text/javascript" src="/javascripts/jquery.ui.datepicker.min.js"></script>%>

<%#*<link rel="stylesheet" href="/stylesheets/jquery.ui.datepicker.css" type="text/css" />%>


<%#*<link rel="stylesheet" href="/stylesheets/jquery-ui-1.8.17.custom.css" type="text/css" />%>
<script type="text/javascript">

  $(function() {
    $( "#start_date" ).datepicker({
      dateFormat: 'mm-dd-yy',
      yearRange: "-60:+0",
      showOn: "button",
      buttonImage: "/pictures/calendar.gif",
      buttonImageOnly: true,
      changeMonth: true,
      changeYear: true
    });
  });


  $(function() {
    $( "#end_date" ).datepicker({
      dateFormat: 'mm-dd-yy',
      yearRange: "-60:+0",
      showOn: "button",
      buttonImage: "/pictures/calendar.gif",
      buttonImageOnly: true,
      changeMonth: true,
      changeYear: true
    });
  });



  $(function() {
    $( "#status_date" ).datepicker({
      dateFormat: 'mm-dd-yy',
      yearRange: "-60:+0",
      showOn: "button",
      buttonImage: "/pictures/calendar.gif",
      buttonImageOnly: true,
      changeMonth: true,
      changeYear: true
    });
  });


</script>



<% form_remote_tag :update => 'table123',

  :url => {:action => 'upgraded_customers_report'},
  :with => 'from_bdate',
  :with => 'to_bdate',
  :with => 'end_date' do %>

  <table bordercolor="#e5b467"  align="center" width="100%" border="10" cellpadding="4" cellspacing="4">
    <tr  ><th background="/images/body_hor.JPG" colspan="4" align="center" style="backgrund:repeat;" >Search </th>
    </tr>
    <tr><td>Accounts Upgraded from</td><td>
        <input type="text" name="from_bdate" id="start_date" title="Account Start Date" readonly  value="<%=params[:from_bdate]%>"/>&nbsp;&nbsp;
        &nbsp;
      </td></tr>
    <tr><td>Accounts Upgraded to</td><td> <input type="text" name="to_bdate" id="end_date" title="Account End Date" readonly value="<%=params[:to_bdate]%>"/>&nbsp;&nbsp;

        &nbsp;</td></tr>


    <tr><td>Account Type</td><td>
        <select name="account_type" id="account_type">
          <option value="" <%if params[:account_type]=='' %>selected<%end%>>All Users</option>
          <option value="free_user" <%if params[:account_type]=='free_user' %>selected<%end%>>Free Users  </option>
          <option value="familyws_user" <%if params[:account_type]=='familyws_user' %>selected<%end%>>Family Website Users  </option>
          <option value="platinum_user" <%if params[:account_type]=='platinum_user' %>selected<%end%>>Premium Users </option>


        </select>
        &nbsp;</td></tr>

    <tr><td>Studio Group</td><td>
        <select name="studio_group" id="studio_group">

          <option value="" <%if params[:studio_group]=='' %>selected<%end%>>All</option>
          <% if session[:manager]
            @hmmstudiogrps=HmmStudiogroup.find(:all,:conditions=> "id in (#{@stud_group_arr})")%>
          <%else%>
            <% @hmmstudiogrps=HmmStudiogroup.find(:all) %>
          <%end%>
          <%for k in @hmmstudiogrps %>
            <option value="<%=k.id%>" <%if (k.id==params[:studio_group]) %>selected<%end%>><%=k.hmm_franchise_studio%></option>
          <% end %>
        </select>
        &nbsp;</td></tr>
    <tr><td>Studios</td><td>
        <select name="studios" id="studios">

          <option value="" <%if params[:studios]=='' %>selected<%end%>>All</option>
          <% if session[:manager]
            @hmmstudios=@stud
          else%>
            <% @hmmstudios=HmmStudio.find(:all) %>
          <%end%>
          <%for m in @hmmstudios %>
            <option value="<%=m.id%>" <%if (m.id==params[:studios]) %>selected<%end%>><%=m.studio_name%></option>
          <% end %>
        </select>
        &nbsp;</td></tr>
    <tr><td align="center" >&nbsp;</td>
      <td align="left" ><input type="submit" name="sub1" value="Search"/>&nbsp;&nbsp;<input type="button" name="view_all" value="View All" onClick="window.location='/hmm_studios/upgraded_customers_report/?cpg=1'"/></td></tr>
  </table>

<%end%>
<%if !@hmm_users.nil? && !@hmm_users.blank?%>
<h2><font color="green" >Total number of Records : <%=@hmm_users_count%></font></h2>
<%end%>
<a href="/hmm_studios/excel_upgrade_accounts"> Export to Excel</a>

<table border="0">
  <tr><td colspan="15"><h2>
        Upgrade Account Report
      </h2> </td></tr>
 
  <tr valign='center' align='center'>
    <th background="/images/body_hor.JPG"><font class='txt'><table> <tr><th><%= sort_header_tag('v_fname', :text => "Cutomer Name") %></th></tr></table></font></th>

    <th background="/images/body_hor.JPG"><font class='txt'><table> <tr><th><%= sort_header_tag('v_user_name', :text => "User Name") %></th></tr></table></font></th>
    <th background="/images/body_hor.JPG"><font class='txt'><table> <tr><th><%= sort_header_tag('v_e_mail', :text => "Email Address") %></th></tr></table></font></th>
    <th background="/images/body_hor.JPG"><font class='txt'><table> <tr><th><%= sort_header_tag('d_created_date', :text => "Account Created date") %></th></tr></table></font></th>
     <th background="/images/body_hor.JPG"><font class='txt'><table> <tr><th><%= sort_header_tag('upgraded_accounts.created_at', :text => "Upgraded date") %></th></tr></table></font></th>
    <th background="/images/body_hor.JPG"><font class='txt'><table> <tr><th><%= sort_header_tag('account_type', :text => "Account Type") %></th></tr></table></font></th>
    <th background="/images/body_hor.JPG"><font class='txt'><table> <tr><th><%= sort_header_tag('studio_name', :text => "Studio Name") %></th></tr></table></font></th>
    <th background="/images/body_hor.JPG"><font class='txt'><table> <tr><th><%= sort_header_tag('hmm_franchise_studio', :text => "Studio Group") %></th></tr></table></font></th>
  </tr>

   <%= render :partial => "hmm_studios/upgrade_accounts"%>
  
  <tr><td colspan="4">
      <%=will_paginate @hmm_users ,:params=>params%>
    </td>
  </tr>
</table>