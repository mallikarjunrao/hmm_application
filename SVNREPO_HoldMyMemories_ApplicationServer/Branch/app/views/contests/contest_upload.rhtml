<script type="text/javascript">
	function validateFileExtension(fld) {
	if(!/(\.bmp|\.gif|\.jpg|\.jpeg)$/i.test(fld.value)) {
		alert("Invalid file type.. Please enter only image files!!");
		fld.form.reset();
		fld.focus();
		return false;
	}
	return true;
}

function validateFileExtension_video(fld) {
	if(!/(\.mpg|\.mov|\.avi|\.flv|\.wmv|\.mpeg|\.mp4)$/i.test(fld.value)) {
		alert("Invalid file type.. Please enter only video files!!");
		fld.form.reset();
		fld.focus();
		return false;
	}
	return true;
}

function verify()
{
	
	if (document.getElementById('hmm_user_v_myimage').value == "")
	{
		
		alert('please upload a file!!');
		return false;
	}
	else 
	if (document.getElementById('journal_v_image_comment').value == "")
	{
		alert('please enter the journal!!');
		return false;
	}
        if(document.getElementById('terms').checked == false)
		{
			document.getElementById('terms').focus();
			alert("You must agree to the rules to proceed")
			return false;
		}
	else 
	document.getElementById('loading').style.display='block';
	return true;
	
}
	
</script>

<%= javascript_include_tag 'SpryAssets/SpryValidationTextField' %>

 <%= stylesheet_link_tag 'SpryAssets/SpryValidationTextField' %>

<%session[:friend]='' %>
<% form_tag("http://content.holdmymemories.com/contest_upload/create_contest/#{params[:id]}", {:multipart => true}) do %>	

<table width="890" border="0">
	<input type="hidden" value="<%=@uid%>" name="uid" id="uid">
	<input type="hidden" value="<%=@moment_type%>" name="moment" id="moment">
	<tr>
		<td colspan="3"><font color="#ffffff" size="3">&nbsp;</font></td>
	</tr>
	<%if session[:contest] == "Video"%>
	<tr>
		<td colspan="3" align="center"><font color="#ffffff" size="4"> You have successfully registered for the audition this weekend, we will see you there!<br><br>If you have a talent/skills video, you may also upload it now:<br>_______________________________________________________________________________</font></td>
	</tr>
	<%else%>
	<tr>
		<td colspan="3" align="center"><font color="#ffffff" size="4"> You have successfully registered for Cute Kid Contest!!<br><br>Please Upload your Kids Image now:<br>_______________________________________________________________________________</font></td>
	</tr>
	<%end%>
	<tr>
		<td colspan="3"><font color="#ffffff" size="3">&nbsp;</font></td>
	</tr>
	<%if session[:contest] == "Video"%>
	<tr>
		<td align="right" width="300">
		     <font color="#ffffff" size="2" ><b></b></font>
		</td>
		<td align="left" valign="top" scope="col">&nbsp;</td>
		<td align="left" width="580"><font color="#ffffff" size="3">
			Upload A Video for the Contest </font>
		</td>
	</tr>
	<tr>
		<td align="right" width="300">
		     <font color="#ffffff" size="2" ><b></b></font>
		</td>
		<td align="left" valign="top" scope="col">&nbsp;</td>
		<td align="left" width="580">
			
		</td>
	</tr>
    <tr>
		<td align="right" width="300">
		     <font color="#ffffff" size="2" ><b>Upload Video:</b></font>
		</td>
		<td align="left" valign="top" scope="col">&nbsp;</td>
		<td align="left" width="580">
			<%= file_field 'hmm_user', 'v_myimage', :size => 30, :onchange => "validateFileExtension_video(this)"%>
		</td>
	</tr>
	<%else%>
	<tr>
		<td align="right" valign="top" scope="col" width="350">
		    <font color="#ffffff" size="2" ><b>Upload Image</b></font>
		</td>
		<td align="left" valign="top" scope="col">&nbsp;</td>
		<td align="left" width="530">
			<%= file_field 'hmm_user', 'v_myimage', :size => 30, :onchange => "return validateFileExtension(this)"%>
		</td>
	</tr>
	<%end%>
	<tr>
		<th colspan="3">
			&nbsp;
		</th>
	</tr>
	<tr>
		<td align="right" width="300">
		     <font color="#ffffff" size="2" ><b>Entrants first name:</b></font>
		</td>
		<td align="left" valign="top" scope="col">&nbsp;</td>
		<td align="left" width="580">
			<%= text_field 'contest', 'first_name', :class => "textbox-journals"%>
		</td>
	</tr>
	<tr>
		<th colspan="3">
			&nbsp;
		</th>
	</tr>
	<tr>
		<th colspan="3">
			<font color="#ffffff" size="3">Tell us a little bit about this entry (this information will be included with your entry):</font>
		</th>
	</tr>
	<tr>
		<th colspan="3">
			&nbsp;
		</th>
	</tr>
	<tr>
              <th align="right" valign="top" scope="col">Title</th>
              <th  align="left" valign="top" scope="col">&nbsp;</th>
              <th width="91" align="left" valign="top" scope="col"><span id="sprytextfield1"><span id="sprytextfield1"><%= text_field 'journal', 'v_title', :size => 20, :class => "textbox-journals" %><span class="textfieldRequiredMsg"><br>Title is required.</br></span></span></span></th>
                </tr>
				<tr>
					<th>&nbsp;</th>
				</tr>
				  <tr>
              <th align="right" valign="top" scope="col">Date</th>
              <th  align="left" valign="top" scope="col">&nbsp;</th>
              <th  align="left" valign="top" scope="col">
              <%= date_select 'journal', 'date_added',  :order => [:month, :day, :year], :start_year => Time.now.year, :end_year => Time.now.year - 100 %>
                         </tr>
				<tr>
					<th>&nbsp;</th>
				</tr>
				  <tr>
              <th align="right" valign="top" scope="col">Description</th>
              <th width="14" align="left" valign="top" scope="col">&nbsp;</th>
              <th width="91" align="left" valign="top" scope="col"><span id="sprytextfield2"><span id="sprytextfield2"><%=text_area 'journal', 'v_image_comment', :rows =>"10", :cols=>"80",  :class => "textbox-journal"%><span class="textfieldRequiredMsg"><br>Description is required.</br></span></span></span></th>
                </tr>
			<tr>
              <th height="12" colspan="9" align="center" valign="top" scope="col" class="signedtxtwhite">&nbsp;</th>
              </tr>
              <%if session[:contest] == "Video"%>
                <tr>
                    <th height="12" colspan="9" align="center" valign="top" scope="col" >
                      <br> <input type="checkbox" name="terms" id="terms" value="1"  /><font color="#ffffff" size="1">I agree to the <a href="/static/rules" target="_blank"><u>Rules</u></a> of Got Skills Contest </font><p>&nbsp</p>
		    </th>
                </tr>
            <%end%>
            <tr>
              	<th height="12" colspan="9" align="center" valign="top" scope="col" class="signedtxtwhite">
              	<input type='image' src="/images/submit_btn.jpg" width="87" height="24" border="0" onclick="return verify();" />
				&nbsp;&nbsp;
				<a href="/myphotos/choose_upload/" border="0"> <img src="/images/cancel_btn.jpg"  value="Cancel" name="cancel" id="cancel" width="87" height="25" border="0"></a>
				</th>
            </tr>
			<tr>
				<th>&nbsp;</th>
			</tr>
			
			<tr>
				<th align="center">
					<div id="loading" style="display:none">
						<img src="/images/uploadfile.gif" name="load" id="load">
					</div>
				</th>
			</tr>
			
</table>
<%end%>

		  <script type="text/javascript">
<!--
var sprytextfield1 = new Spry.Widget.ValidationTextField("sprytextfield1", "none", {validateOn:["blur"]});
var sprytextfield2 = new Spry.Widget.ValidationTextField("sprytextfield2", "none", {validateOn:["blur"]});

//-->
</script>