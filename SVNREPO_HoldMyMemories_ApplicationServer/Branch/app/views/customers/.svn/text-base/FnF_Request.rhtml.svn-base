    <script type="text/javascript">
    function validate() {
      /*
      Following filter taken from
      
      http://www.quirksmode.org/js/mailcheck.html
      
      */
      var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
      var addresses = document.getElementById( "idEmail" ).value.split( "," );
      var ok = true;
      for ( var i=0; i<addresses.length; ++i ) {
        if ( !addresses[i].match(filter) ) {
          ok = false;
          
		  break;
        }
      }
      if ( ok ) {
       // alert( "Input is valid!" );
		return true;
      } else {
        alert( "Input is not valid!" );
		return false;
      }
    }
	
	
	function imageswap(element,div)
	 {
		var i = document.getElementById(element).src;
		var temp = i.split("/");
		var source = temp[temp.length-1];
		
		
		if(source=="arrow_down.PNG")
		{
			document.getElementById(element).src="/images/arrow_up.png";
			document.getElementById(div).style.display="none";
			
		}
		else if(source=="arrow_up.png")
		{
			document.getElementById(element).src="/images/arrow_down.PNG"
			document.getElementById(div).style.display="block";
		}
	  
	}
	
	function editval() 
	{
		//alert('i am in');
		if (document.getElementById('fnf_groups').value == '') {
			alert( "Please enter the name of the group!!" );
			document.getElementById('fnf_groups').focus();
			return false;
		}
		else{
			return true;
		} 
		return false;
	}
	
	function hide_accept()
	{
		alert('im here')
		document.getElementById('accept_frd').style.display = 'none';
	}
  </script>
<%session[:sharepath]='fnf'%>
<% session[:friend]=''%>
<table border="0">
<tr>
  <th width="0" align="left" valign="top" scope="col"></th>
  <th width="510" align="left" valign="top" scope="col">
  	<table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <th width="140" height="22" align="left" valign="top" scope="col">
      	
      	<a href="/customers/edit_profile/<%=logged_in_hmm_user.id%>" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image22','','/images/manage-profile_over.jpg',1)">
      	<img src="/images/manage-profile_def.jpg" name="Image22" width="140" height="22" border="0" id="Image22" /></a>
	  </th>
      
	  
      
	  <th width="206" align="left" valign="top" scope="col">
	  
	  		<img src="/images/manage-fndsandfmly_over.jpg" name="Image24" width="206" height="22" border="0" id="Image24" /></a>
			</th>
      
	  <th width="164" align="left" valign="top" scope="col">
	  	<a href="/chapter_comment/allcmt_list/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image25','','/images/manage-comments_over.jpg',1)">
	  	<img src="/images/manage-comments_def.jpg" name="Image25" width="164" height="22" border="0" id="Image25" /></a>	  </th>
		
		<th width="164" align="left" valign="top" scope="col">
	  	<a href="/share_moments/manageShare/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image26','','/images/manage-share_over.jpg',1)">
	  	<img src="/images/manage-share_def.jpg" name="Image25" width="140" height="22" border="0" id="Image26" /></a>	  
		</th>
		
		<th width="206" align="left" valign="top" scope="col">
			<a href="/family_members/familypage_step1/<%=logged_in_hmm_user.id%>" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image27','','/images/mang_family_web_over.jpg',1)">
	  	
	  	<img src="/images/mang_family_web_def.jpg" name="Image27" width="206" height="22" border="0" id="Image27" /></a>	  
		</th>
		
    </tr>
  </table></th>
  <th width="390" align="left" valign="top" scope="col"></th>
</tr>
</table>

<p align="center" width="100%"><font color="f5dfa6"><%= flash[:notice_accept] %></font>
<font color="f5dfa6"><%= flash[:notice_reg]%></font></p>
<table><tr>
<td width="886" align="left" valign="top">
	<div id="effect_area">
    
    <% if flash[:notice_accept]==nil || flash[:notice_reg]==nil %>
    
    
    <h3><a href="#" title="Click here to open/close Pending Family & Friends requests." onClick="new Ajax.Updater('table1', '/friends_family/new_requests/ '+status, {asynchronous:true, evalScripts:true, onLoading:function(request) {Effect.Appear('Loading');}}); return false;"><img src='/images/arrow_down.PNG' id='img1' border='0' onclick='imageswap("img1","table1");'><span onclick='imageswap("img1","table1");'>Pending Friends & Family Requests</span></a></h3>
   	<div id="table1">
    	 <table width="88%" border="0" cellspacing="4" class="border" cellpadding="4">
 
    <%if @fnf_req.size==0%>
		<tr><td>&nbsp;&nbsp;</td><td  valign="middle"  align="left"><h4><font color="white"> No pending requests! </font></h4></td></tr>
	<%else%> 
	<% for i in @fnf_req %>
	
		  
		 
	<tr>
		  
      <th colspan="2" align="left" valign="middle" bgcolor="#191919" scope="col">
      	<span class="btmtxt">Friends and Family Request from <%= i.v_fname %>:</span>
	  </th>
    
	</tr>
	 
	 <tr>
	 	<th class="border" width='15%' align="center" valign="middle">
	 		<a href="/customers/profile/<%=i.frid%>"> <img src="<%=i.img_url%>/hmmuser/photos/thumb/<%=i.v_myimage%>" border="0"/></a>
		</th>
       
	   <th class="border" colspan="0" align="left" valign="top" scope="col">
       	<%= i.v_fname %> would like to share <%if i.e_sex=='M'%>his<%else%>her<%end%> memories with you at HoldMyMemories.com.  <br>
		
	   </th>
	   
	</tr>
	
	 <tr>
	 	<th class="border" width='15%' align="center" valign="middle">
	 	</th>
       
	   <th class="border" colspan="0" align="left" valign="top" scope="col">
     	<div id="<%=i.id%>" > </div>	
	   </th>
	   
	</tr>	

	<tr bordercolor="#191919">
		
		<th class="border" colspan="2" align="left">
		<div id="accept_frd">
			<table>
				<tr bordercolor="#191919">
					<th class="border" colspan="2" align="left">
						
						<a href="#" onclick="new Ajax.Updater('<%=i.id%>', '/customers/group_fnf/<%=i.uid%>', {asynchronous:true, evalScripts:true}); document.getElementById('accept_frd').style.display = 'none'; return false;">Accept</a>	
							
							&nbsp;&nbsp;&nbsp;
		
	  					<a href="/customers/Reject_fnf/<%=i.frnid%>" >Reject</a>
					</th>
				</tr>
			</table>
		</div>
	
            
		</th>
	
	</tr>

	
	<%end%>
	
		
	<%end%>
</table>
    </div>

  <h3><a href="#" title="Click here to open/close Blocked Family & Friends Account." onClick="new Ajax.Updater('table2', '/friends_family/blocked_friends/ '+status, {asynchronous:true, evalScripts:true, onLoading:function(request) {Effect.Appear('Loading');}}); return false;"><img src='/images/arrow_up.png' id='img2' border='0' onclick='imageswap("img2","table2");'><span onclick='imageswap("img2","table2");' >Blocked Friends & Family</span></a></h3>
   	<div id="table2">
   
    </div>
	

	
   
		<%end%>

		</div>
        
		
		
		
</td>
<td width="331" valign="top">

<table align="center" width="100%"  border="0" cellspacing="0" cellpadding="0">
    
	
	
      	<font color="f5dfa6"></font>
	
      

	
	<tr bgcolor="#191919" height="20">
      
      <th colspan="2" align="left" valign="middle" scope="col"><font size="2"><font face="Arial, Helvetica, sans-serif">Manage Groups</font></font></th>
    </tr>
	
	
	
    
		
    <tr>
      
      <th width="800" align="left" valign="top" class="text-journal" scope="col">
      <table width="100%" align="center" border="0" >
      	<% for group in @fnf_groups %>
		<tr>
        	<td>
            	
				<% friends = FamilyFriend.count(:all, :conditions => "fnf_category=#{group.id} and status='accepted' and block_status='unblock'")%> 
			<a href="/customers/fnf_show/<%=group.id%>"><%=group.fnf_category%>(<%=friends%>)</a></td>
			<%if group.fnf_category=='Friends' || group.fnf_category=='Family' %>
				<td colspan="2">
				Default Group	<td>
			<%else%>
			<td>
				<%= link_to_remote("Edit",
				:update => 'effect_area', :url => {:controller => :fnf_group, :action => :edit, :id => group.id }) %>			</td>
			<td>
				<a href="/fnf_group/destroying/<%=group.id%>">Delete</a>		</td>
        </tr>
       		<%end%>
		<%end%>   
      </table>            </th>
      <th width="566" align="left" valign="top" scope="col"></th>
    </tr>
    <tr>
      <th align="left" valign="top" class="text-journal" scope="col">&nbsp;</th>
      <th align="left" valign="top" scope="col"></th>
    </tr>
    <tr>
      <th align="left" valign="top" class="text-journal" scope="col">&nbsp;</th>
      <th align="left" valign="top" scope="col"></th>
    </tr>
    
    <tr class="border"  align="center" height="20">
      <th colspan="2"  align="left" valign="top" class="text-journal" scope="col"><font size="2" face='Arial, Helvetica, sans-serif'><u>
      		<a href="/customers/list_share/<%=group.id%>">Friends Shared Moments</a></u></font>
		</th>
      </tr>
    <tr>
      <th colspan="2" align="left" valign="top" class="text-journal" scope="col">&nbsp;</th>
    </tr>
	
	<tr class="border"  align="center" height="20">
      <th colspan="2"  align="left" valign="top" class="text-journal" scope="col"><font size='2' face='Arial, Helvetica, sans-serif'><u>
      		<a href="/share_moments/shareMoments_byme/<%=group.id%>">Shared Moments by Me</a></u></font>
		</th>
      </tr>
    <tr>
      <th colspan="2" align="left" valign="top" class="text-journal" scope="col">&nbsp;</th>
    </tr>
	
    <tr class="border"  align="center" height="20">
      <th colspan="2" align="left" valign="top" class="text-journal" scope="col">    	 	
	  <font face='Arial, Helvetica, sans-serif'><u><a href="/customers/list_imports/<%=group.id%>">Imported Moments</a></u></font>
  	</th>
	<tr>
      <th colspan="2" align="left" valign="top" class="text-journal" scope="col">&nbsp;</th>
    </tr>
   
	<tr class="border"  align="center" height="30">
      <th colspan="2" align="left" valign="top" class="text-journal" scope="col">    	 	
	  <font face='Arial, Helvetica, sans-serif'><u><a href="/customers/list_export/<%=group.id%>">Exported Moments</a></u></font>
  	</th>
    </tr>
	<tr>
      <th colspan="2" align="left" valign="top" class="text-journal" scope="col">&nbsp;</th>
    </tr>
    <tr class="border"  align="center" height="20">
      <th colspan="2" align="left" valign="top" class="text-journal" scope="col">    	 	
	  <font face='Arial, Helvetica, sans-serif'><u><a href="/customers/shareJournal_list/<%=group.id%>">Shared Journals</a></u></font>
  	</th>
	<tr>
	
	
    <tr>
      <th colspan="2" align="left" valign="top" class="text-journal" scope="col">&nbsp;</th>
    </tr>
    <tr class="border"  align="center" height="">
      <th colspan="2" align="left" valign="bottom" class="text-journal" scope="col">    	 	
	  <font face='Arial, Helvetica, sans-serif'><b>Invite friends</b></font>
      <form method="post" action="/invite_friends/create" onSubmit="return validate();">
   

  
  
    <p>
      Please enter one or more email addresses separated by commas.
    </p>
    <input type="text" name="email" id="idEmail"  size=""/>
    <input type="submit" value="add friends" />
  
      </form>
  	</th>
    </tr>
    
    
	<font color="fdf1ca"></font>
	
</table>

</td>
</tr></table>

<br>





